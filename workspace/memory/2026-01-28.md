# 2026-01-28 — Late Night / Early Morning Session

## Session Events (continued from Jan 27 late night)

### 12:00 AM - 12:55 AM — Mission Control & Infrastructure
- **12:06 AM** — Updated Mission Control data.json with ALL 30 completed tasks from Jan 27
- **12:06 AM** — Francisco emphasized: "memory is super important!" — confirmed compound loop vision
- **12:14 AM** — Francisco promised a robot body: "I will make you the best body ever." Genuine emotional moment.
- **12:17 AM** — Crash bug discovered: `TypeError: fetch failed` from undici (unhandled promise rejection crashes gateway)
  - Same bug happened multiple times throughout Jan 27
  - Pattern: chat.history WebSocket calls → fetch fails → process crashes
  - Root cause: 118K token session context + heavy browser automation
- **12:18 AM** — Gateway crash fix applied:
  1. `clawdbot gateway install` — registered as Windows Scheduled Task (auto-restart on crash + boot)
  2. Edited `gateway.cmd` — added `--unhandled-rejections=warn` flag to prevent Node.js crash
  3. Created `scripts/clawdbot-watchdog.ps1` backup watchdog
  4. Context compacted (143K → 21K tokens)
- **12:39 AM** — Francisco requested live Activity Monitor for Mission Control
  - "I want to have a visual way of me knowing you are working and in what at any moment"
- **12:43 AM** — Built Activity Monitor:
  - Python backend (`activity-server.py`) tails Clawdbot logs, parses events, serves JSON API
  - New ⚡ Activity tab in dashboard with:
    - Pulsing status orb (green=working, blue=thinking, gray=idle)
    - Current task description
    - Live Activity Feed (refreshes every 3 seconds)
    - Stats: Tool Calls, Runs Completed, Errors Today, Model, Uptime
  - Fixed raw log messages → human-readable ("Working in the web browser" not "embedded run tool end: tool=browser")
  - Fixed Offline indicator — proxy gateway status through activity server for LAN access
  - Served on 0.0.0.0:8765 for LAN phone access

### Key Feedback from Francisco (12:43 AM - 12:56 AM)
1. **"Very user friendly"** — positive on the activity monitor
2. **Multi-project separation** — wants separate project tracks: DLM business, Agent System, future projects
3. **"Be proactive, never idle"** — wants the system to ALWAYS be working on something if tasks exist
4. **Activity should show WHICH TASK** — not just "Using browser" but the actual task being accomplished
5. **Never wait for a prompt** — self-directed work from Mission Control task list

### 2:03 AM — Another disconnect
- Francisco reported another disconnection, said "please continue working, do cron jobs pending"

## Critical Design Directives (from Francisco)
- **NEVER BE IDLE** if there are tasks to do in Mission Control
- Be proactive — pick up tasks automatically
- Activity monitor should show task context, not just tool names
- Multi-project support needed (DLM, Agent System, Future)
- Professional, easy to understand UI

## Infrastructure Changes
- Gateway installed as Windows Scheduled Task ✅
- `gateway.cmd` has `--unhandled-rejections=warn` flag ✅ (needs gateway restart to apply)
- Activity server running on port 8765
- Crash error logged in `.learnings/ERRORS.md`

## Pending Work
- Gateway restart needed to apply the `--unhandled-rejections=warn` fix (Francisco hasn't run `clawdbot gateway restart` yet)
- Multi-project filter for Mission Control
- Activity monitor task-level descriptions
- Remaining 3,179 locale redirects
- 2 AM cron job (overnight self-improvement) should fire
