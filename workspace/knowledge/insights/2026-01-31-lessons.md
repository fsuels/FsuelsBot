---
updated: 2026-01-31
type: lessons
source: nightly-learn
---

# Lessons Learned: 2026-01-31

## Lesson 1: PowerShell JSON Serialization Can Corrupt Files

**Context:** During self-improvement loop, updating tasks.json with task discussion
**Failure:** `ConvertTo-Json -Depth 10` caused tasks.json to balloon from 980KB to 431MB
**Fix:** Restored from git, squashed corrupted commits, force pushed
**Prevention:** 
- Use simpler JSON updates (avoid deep nesting)
- Monitor file sizes after JSON operations
- Always have recent git commits as safety net

## Lesson 2: Claims Without Evidence = Technical Debt

**Context:** Found 114 tasks marked "done" but with no verification
**Failure:** 1.7% verification rate - almost all completions were unverified claims
**Fix:** Created verification gate that blocks completion without epistemic fields
**Prevention:**
- `verify-before-done.ps1` script enforces verification
- Heartbeat checks `unverifiedCompletions` count
- Rule: If > 0, STOP and fix immediately

## Lesson 3: Combined Scripts Beat Multiple Invocations

**Context:** Heartbeat was running 4 separate PowerShell scripts
**Failure:** 3+ seconds overhead from PS startup Ã— 4
**Fix:** Created single `heartbeat-checks.ps1` that does all checks
**Prevention:** 
- Combine related checks into single script
- Measure before/after to verify improvement
- PS startup overhead is ~250ms per invocation

## Lesson 4: Temp Scripts Accumulate Without Cleanup

**Context:** Found 10 temp-*.ps1 and 8 temp-*.py scripts cluttering scripts/
**Failure:** One-off scripts left behind, creating confusion and bloat
**Fix:** Deleted all temp scripts, reduced from 50+ to 33 PS1, 17 PY
**Prevention:**
- Delete temp scripts immediately after use
- Or use inline PowerShell/Python instead of creating files
- Periodic cleanup audit

## Lesson 5: Security Patterns Need Proactive .gitignore

**Context:** Security audit found .gitignore missing patterns for sensitive files
**Failure:** *.pem, *.key, credentials, secrets not covered
**Fix:** Added security patterns to .gitignore
**Prevention:**
- Include security patterns in initial .gitignore
- Run periodic security audits
- Check for exposed secrets in scripts
